# Face Recognition Attendance System Configuration

# Face Detection & Recognition Settings
face_recognition:
  model_name: "buffalo_l"  # Options: buffalo_l, buffalo_m, buffalo_sc, antelopev2
  model_path: "./models"
  
  # Detection settings
  detection:
    det_size_gpu: [320, 320]  # Detection resolution for GPU
    det_size_cpu: [192, 192]  # Detection resolution for CPU fallback
    det_threshold_gpu: 0.5    # Detection confidence threshold (GPU)
    det_threshold_cpu: 0.6    # Detection confidence threshold (CPU)
    max_faces: 10             # Maximum faces to detect per frame
  
  # Recognition settings
  recognition:
    similarity_threshold: 0.6  # Cosine distance threshold for face matching
    embedding_size: 512        # Face embedding dimension
  
  # Execution providers (in order of preference)
  providers:
    - "CUDAExecutionProvider"  # GPU (NVIDIA CUDA)
    - "CPUExecutionProvider"   # CPU fallback

# Bounding Box Display Settings
bounding_box:
  font_scale: 0.5           # Text size for roll number label
  font_thickness: 1         # Text thickness
  box_thickness: 2          # Rectangle border thickness
  box_color_known: [0, 255, 0]     # Green for recognized faces (BGR)
  box_color_unknown: [0, 0, 255]   # Red for unknown faces (BGR)
  label_offset_y: -10       # Label position above box

# Attendance Settings
attendance:
  cooldown_minutes: 5       # Minutes between duplicate attendance records
  auto_mark_enabled: true   # Auto-mark attendance on recognition
  manual_camera_id: "Manual"  # Camera ID for manual attendance entries

# Student Photo Settings
student_photos:
  directory: "./student_photos"
  filename_format: "{roll_number}_{index}.jpg"  # Format for multiple photos
  max_photos_per_student: 10
  allowed_extensions:
    - jpg
    - jpeg
    - png

# Database Settings
database:
  path: "./sql_app.db"
  backup_path: "./sql_app_backup_{timestamp}.db"
  echo: false  # Set to true for SQL query logging

# API Settings
api:
  host: "127.0.0.1"
  port: 8000
  reload: true
  cors_origins:
    - "http://localhost:5173"
    - "http://127.0.0.1:5173"

# Live Stream Settings
live_stream:
  frame_interval_ms: 500     # Processing interval (milliseconds)
  cache_refresh_seconds: 30  # Student cache refresh interval
  jpeg_quality: 85           # Output JPEG quality (1-100)
  resize_width: 480          # Resize frame width for faster processing

# Camera Settings
cameras:
  default_stream_url: "0"   # Default webcam
  snapshot_timeout: 5        # Timeout in seconds for camera snapshot
  
# Logging Settings
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "./logs/app.log"
  max_bytes: 10485760  # 10MB
  backup_count: 5

# Performance Settings
performance:
  enable_gpu: true
  num_workers: 4
  prefetch_factor: 2

# Helper functions for config access
def get_live_stream_config():
  return config.get_section('live_stream')
